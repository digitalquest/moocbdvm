<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">
<head>
<title>Prise en main rapide de la Box Vagrant du MOOC BD Télécom SudParis</title>
<!-- 2014-09-05 ven. 14:39 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Équipe du MOOC Bases de données relationnelles de Télécom-SudParis" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Prise en main rapide de la Box Vagrant du MOOC BD Télécom SudParis</h1>
<p>
Ceci constitue une documentation succincte de prise en main de la Box
Vagrant du MOOC BD Télécom SudParis. 
</p>

<p>
Une version plus détaillée est disponible séparément, et des vidéos
accessibles depuis le MOOC illustrent les étapes ci-dessous.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Prérequis</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>Disposer d'un ordinateur de bureau moderne avec un système d'exploitation
Windows, Linux ou MacOSX dans une version récente<sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup> (les
instructions ci-dessous concerne les versions 64 bits<sup><a id="fnr.2" name="fnr.2" class="footref" href="#fn.2">2</a></sup>);
</li>

<li>Avoir un environnement internet à haut débit pour le téléchargement de l'environnement<sup><a id="fnr.3" name="fnr.3" class="footref" href="#fn.3">3</a></sup>;
</li>

<li>Avoir au moins 2 Go de libre sur un disque dur local;
</li>

<li>Maîtriser un minimum l'utilisation du système d'exploitation,
notamment en mode <i>invite de commande</i> (i.e. commandes de base DOS
sous Windows, ou shell Unix sous MacOS et Linux, type <code>cd</code>, <code>ls/dir</code>, etc.);
</li>

<li>Être administrateur du poste de travail (pouvoir installer de
nouveaux logiciels).
</li>
</ul>
</div>

<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Avertissement</h3>
<div class="outline-text-3" id="text-1-1">
<p>
<i>Nous avons fait de notre mieux pour fournir un environnement fonctionnel, basé sur des logiciels libres, mais vous l'utilisez <b>à vos risques et périls, sans aucune garantie</b>. Nous ne pouvons être tenus responsables des dommages qui résulteraient de l'utilisation de cet environnement.</i> 
</p>
</div>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Objectifs</h2>
<div class="outline-text-2" id="text-2">
<p>
Cet environnement est destiné aux travaux pratiques <b>avancés</b>, et aux
modules d'ouverture du MOOC BD, nécessitant la connexion à un serveur
de bases de données : manipulation du schéma de la base, contraintes
d'intégrité avancée, protection, couplage BD et Web, etc.
</p>

<p>
L'environnement permet de faire fonctionner un serveur Web et un
serveur de bases de données <b>en local</b>, dans une machine virtuelle,
plutôt que de devoir se connecter à un serveur accessible sur Internet
(ou sur le réseau interne de Télécom SudParis).
</p>

<p>
Notre objectif, en fournissant un tel environnement, est de faciliter
l'installation d'un environnement de travaux pratiques intégrant un
serveur de bases de données déjà opérationnel, et des bases de données
déjà remplies. 
</p>

<p>
Nous espérons qu'il vous permettra de vous concentrer sur la
compréhension des fonctionnalités d'un serveur de bases de données professionnel,
sans investir trop d'énergie dans des opérations d'installation et de
configuration système qui ne relèvent pas des objectifs de ce cours.
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Installation des logiciels de base</h2>
<div class="outline-text-2" id="text-3">
<p>
Téléchargez les paquetages d'installation de <i>Oracle VirtualBox</i> et
<i>Vagrant</i> : si vous utilisez Windows ou MacOSX, installez les
paquetages fournis par l'éditeur depuis les liens ci-dessous
(attention, les sites sont en anglais); si vous êtes sous Linux, vous
pouvez préférer l'installation des paquetages natifs pour votre
distribution.
</p>

<p>
Liens de <b>téléchargement</b> :
</p>
<ol class="org-ol">
<li>VirtualBox : <a href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a> (les
extensions pour VirtualBox ne sont pas nécessaires)
</li>
<li>Vagrant : <a href="http://www.vagrantup.com/downloads.html">http://www.vagrantup.com/downloads.html</a>
</li>
</ol>

<p>
Puis effectuez l'<b>installation</b> de chacune des deux applications,
dans l'ordre suivant :
</p>
<ol class="org-ol">
<li>d'abord <i>VirtualBox</i>;
</li>
<li>ensuite <i>Vagrant</i>.
</li>
</ol>

<p>
Il est possible que cette installation nécessite un redémarrage de
votre ordinateur : suivez les indications fournies lors de l'installation.
</p>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Première mise en route</h2>
<div class="outline-text-2" id="text-4">
<ol class="org-ol">
<li>une fois Vagrant et VirtualBox installés, <b>créez un nouveau dossier de
travail</b> dans votre dossier utilisateur.

<p>
C'est dans ce dossier que Vagrant installera une <b>machine
virtuelle</b>, et où les fichiers des TPs devront résider. Ce dossier
doit être choisi sur une partition disposant d'au moins 2 Go
d'espace de stockage libre.
</p>
</li>

<li>ouvrez une <i>invite de commande</i> <sup><a id="fnr.4" name="fnr.4" class="footref" href="#fn.4">4</a></sup> et positionnez-vous dans ce
dossier de travail (utilisez la commande <code>cd</code> pour vous déplacer
jusqu'à l'intérieur du dossier de travail)
</li>

<li>Entrez la commande suivante dans l'invite de commande :
<pre class="example">
vagrant init oberger/moocbdvm
</pre>

<p>
Un nouveau fichier <code>Vagrantfile</code> est créé dans le dossier de
travail
</p>
</li>

<li>Entrez la commande suivante dans l'invite de commande, en étant
connecté à Internet (réseau haut-débit de préférence):

<pre class="example">
vagrant up
</pre>

<p>
ceci va exécuter plusieurs actions :
</p>

<ol class="org-ol">
<li>télécharger la <i>box</i> Vagrant depuis Internet (env. 350 Mo),
</li>

<li>créer une nouvelle machine virtuelle VirtualBox à partir de
cette box
</li>

<li>démarrer cette machine virtuelle nouvellement créée, qui
fournira l'environnement Web et bases de données que vous allez
utiliser<sup><a id="fnr.5" name="fnr.5" class="footref" href="#fn.5">5</a></sup>.
</li>
</ol>
<p>
Si tout va bien, la machine virtuelle est créée et démarrée et vous
voyez sa <i>console de connexion</i> Linux s'afficher, et Vagrant confirme que
la machine virtuelle est bien démarrée.
</p>

<p>
Si une des étapes échoue, reportez-vous à la <i>FAQ</i> de la
documentation complète pour des pistes de résolution, ou
contactez-nous via les forums du MOOC.
</p>
</li>
</ol>

<p>
Cette étape de mise en route de la machine virtuelle n'est à effectuer
qu'une seule fois. Ensuite, la machine est présente et sauvegardée
dans VirtualBox, et sera de nouveau accessible au cours des prochaines
semaines. Vous pourrez la mettre en pause, la redémarrer, et
éventuellement la supprimer, soit depuis l'interface graphique de
<i>Oracle VirtualBox</i>, soit via des commandes Vagrant.
</p>

<p>
Pour une explication des commandes de base de Vagrant,
consultez
<a href="http://docs.vagrantup.com/v2/getting-started/index.html">le guide de démarrage vagrant (en anglais)</a>.
</p>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Utilisation de la machine virtuelle pour les travaux pratiques</h2>
<div class="outline-text-2" id="text-5">
<p>
Si la première mise en route s'est bien passée, il suffira de relancer
la commande <code>vagrant up</code> dans le dossier de travail pour s'assurer que
la machine virtuelle est bien redémarrée.
</p>

<p>
Une fois la machine virtuelle démarrée, les applications suivantes
sont disponibles, via un navigateur Web, sur le port <code>8080</code> de votre ordinateur :
</p>
</div>

<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> Exerciseur pour les requêtes SQL (semaine 3)</h3>
<div class="outline-text-3" id="text-5-1">
<p>
Vous pourrez vous connecter sur cette application Web qui est fournie
par la machine virtuelle en vous connectant à l'adresse :
<code>http://localhost:8080/bdsqlwiz/appli/</code>
</p>

<p>
Elle permet de tester des requêtes SQL sur les bases de données
fournies pour le MOOC (vins, films), avec une interface graphique
similaire à l'environnement de requêtage dans le navigateur qui a été introduit
en semaine 2, mais cette fois-ci en interrogeant un <i>vrai serveur de bases de données</i> PostGreSQL, 
et pas seulement une base de données stockée dans le cache du
navigateur Chrome ou Safari, qui ne sauvegarde pas les modifications
de façon persistente.
</p>
</div>
</div>


<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> Travaux pratiques BD et Web en PHP (à partir de la semaine 6)</h3>
<div class="outline-text-3" id="text-5-2">
<p>
Dans le cadre du MOOC, vous serez amenés à réaliser des pages PHP pour
dialoguer avec la base de données.
</p>

<p>
Vous devez placer vos pages dans le sous-répertoire <code>TP/</code> qui aura été
créé dans le répertoire de travail où vous avez executé les commandes
d'installation.
</p>

<p>
Les pages PHP seront alors accessibles depuis <code>http://localhost:8080/TP/</code>
</p>
</div>
</div>

<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3"><span class="section-number-3">5.3</span> Administration d'un serveur PostgreSQL</h3>
<div class="outline-text-3" id="text-5-3">
<p>
En vous connectant sur <code>http://localhost:8080/phppgadmin/</code> vous aurez
accès à un outil professionnel de requêtage et d'administration des
bases de données PostgreSQL : <b>phpPgAdmin</b>.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> En savoir plus et résolutions des problèmes</h2>
<div class="outline-text-2" id="text-6">
<p>
Une version plus complète de cette documentation est disponible sur
<code>http://localhost:8080/</code> en page d'accueil du serveur Web intégré à la
machine virtuelle, ou accessible depuis le site du cours sur <a href="http://mooc.telecom-sudparis.eu/">http://mooc.telecom-sudparis.eu/</a>.
</p>

<p>
En cas de problème, posez vos questions dans les forums du MOOC.
</p>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Copyright</h2>
<div class="outline-text-2" id="text-7">
<p>
<i>This document is (C) Copyright 2014 by Stephane Germain and Institut Mines-Telecom and is licensed under a</i> <a href="http://creativecommons.org/licenses/by-sa/4.0/"><i>Creative Commons Attribution-ShareAlike 4.0 International License</i></a>.
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Notes de bas de page: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
Nous avons réalisé nos tests sur des ordinateurs portables
professionnels en systèmes GNU/Linux ou Microsoft Windows 7
professional.
</p></div>

<div class="footdef"><sup><a id="fn.2" name="fn.2" class="footnum" href="#fnr.2">2</a></sup> <p class="footpara">
Si votre système est en 32 bits, référez-vous à la FAQ de la
version complète de la documentation.
</p></div>

<div class="footdef"><sup><a id="fn.3" name="fn.3" class="footnum" href="#fnr.3">3</a></sup> <p class="footpara">
Une fois l'installation de la <i>box</i> réalisée, l'utilisation de la machine virtuelle se fait en local, sans avoir besoin d'une connexion internet.
</p></div>

<div class="footdef"><sup><a id="fn.4" name="fn.4" class="footnum" href="#fnr.4">4</a></sup> <p class="footpara">
autrement appelé <i>terminal</i>, <i>shell</i>, selon les systèmes d'exploitation
</p></div>

<div class="footdef"><sup><a id="fn.5" name="fn.5" class="footnum" href="#fnr.5">5</a></sup> <p class="footpara">
la machine virtuelle fait fonctionner un système GNU/Linux <i>Debian</i> minimal avec <i>Apache</i>, <i>PHP</i> et <i>PostgreSQL</i>
</p></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Auteur: Équipe du MOOC Bases de données relationnelles de Télécom-SudParis</p>
<p class="date">Date: 2014-09-05 ven. 14:39</p>
<p class="creator"></p>
</div>
</body>
</html>
